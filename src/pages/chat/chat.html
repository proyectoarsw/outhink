<!--
  Generated template for the Chat page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>chat</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

<div style="text-align: center; align-items: center; display: flex; vertical-align: middle;" [style.color]='color'>

  <!-- big number
        <div style="text-align: center; align-items: center; display: flex; vertical-align: middle;" [style.color]='color' *ngIf="showBigNumber">
      <ion-grid>
  <ion-row responsive-sm>
    <ion-col><h1 style="font-size: 100px">{{bigNumber}}</h1></ion-col>
  </ion-row>
    <ion-row responsive-sm>
       <ion-col> <p>Dumps in range</p> </ion-col>
  </ion-row>
  </ion-grid>
        </div>-->

  <!-- line chart -->

      <div style="display: block;" *ngIf="showLineChart">

       <!-- <h2>Number of Dumps in time</h2>-->

         <ion-row responsive-sm>
               <ion-col><h1 style="font-size: 100px">{{bigNumber}}</h1></ion-col>

           <ion-col>
    <canvas baseChart width="200" height="100" 
                [datasets]="lineChartData"
                [labels]="lineChartLabels"
                [options]="lineChartOptions"
                [legend]="lineChartLegend"
                [colors]="[ { 
      backgroundColor: 'rgba('+r+','+g+','+b+',0.2)',
      borderColor: 'rgba('+r+','+g+','+b+',1)',
      pointBackgroundColor: 'rgba('+r+','+g+','+b+',1)',
      pointBorderColor: '#fff',
      pointHoverBackgroundColor: '#fff',
      pointHoverBorderColor: 'rgba('+r+','+g+','+b+',0.8)'
    }]"
                [chartType]="lineChartType"></canvas>
</ion-col>
  </ion-row>

    </div>

  <!-- bar chart -->

  <div style="display: block; margin-right: auto; margin-left: auto;" *ngIf="showBarChart">

        <!--<h2>Top 5 programs with more Dumps</h2>-->

<canvas baseChart width="200" height="200" style="max-width:600px;"
                    [datasets]="chartData"
                    [labels]="chartLabels"
                    [options]="chartOptions"
                    [legend]="chartLegend"
                    [chartType]="chartType"
                    [colors]="    [{ 
      backgroundColor: 'rgba('+r+','+g+','+b+',0.6)',
      borderColor:'rgba('+r+','+g+','+b+',1)'
    }]"></canvas>

  </div>

  <!-- doughnut chart -->

        <div style="display: block; margin-right: auto; margin-left: auto; margin-bottom: 0" *ngIf="showDoughnutChart">

 <!-- <h2>Top 5 most cancelled Jobs by quantity</h2>-->



        <canvas baseChart width="200" height="200" style="max-width:500px " 
                    [data]="donChartData"
                    [labels]="donChartLabels"
                    [legend]="donChartLegend"
                    [chartType]="donChartType"
                    [options]="donChartOptions"
                    [colors]="[{ 
      backgroundColor: client.colors    }]"></canvas>
      </div>

</div>

      <!---------->


</ion-content>

<ion-footer>

<div style="height: 80px; overflow-y: scroll; overflow-x: hidden" #list [scrollTop]="list.scrollHeight - 90">

<ion-list no-lines>
  <ion-item *ngFor="let item of messages" style=" margin: 2px" text-wrap>
      <p style="max-width:200px ; border-radius: 15px ;padding:10px; background-color: #387ef5; color:white" item-right *ngIf="!item.resp">
    {{ item.text }}
      </p>

      <p style="max-width:200px ; border-radius: 15px ;padding:10px; background-color: #32db64; color:white" *ngIf="item.resp">
    {{ item.text }}
      </p>

  </ion-item>
</ion-list>
</div>



<ion-list inset style="max-height: 40px; padding:0; margin-bottom:5px; margin-top: 2px">
    <form [formGroup]="form" (ngSubmit)="sendMessage()">
<ion-item >

 <ion-input type="text" placeholder="Message" value="" formControlName="message"></ion-input>
 <button ion-button item-right round style="height: 30px; width: 80px" type="submit" [disabled]="!form.valid" *ngIf="!loading">Send</button>
 <img item-right src="assets/loading.gif" style="height:30px; margin: auto;
  display: block;"  *ngIf="loading">
</ion-item>
  </form>

</ion-list>
</ion-footer>
